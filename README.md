# FuelStat
A program that expands fuel statistics

![GitHub Logo](/images/logo.png)


**Задача из книги Чарльза Уэзерелла "Этюды для программистов".**

**Горючие слезы, или Учет расхода бензина**

Задача состоит в том, чтобы привести статистику,
исходя из созданных пользователем таблиц.

# Основные условия:

Известно, что каждой новой записи в журнале соответсвует
новая **полная заправка**. Исходя из этого можно сказать,
что количество галлонов, которые он покупает на новой заправке
показывают, сколько галлонов он потратил после прошлой заправки
Следовательно в строке с новой заправкой
указывается расстояние пройденное до новой заправки и 
количество галлонов, которые были потрачены после
предыдущей заправки. А цена голона и цена купленных голонов с
новой заправки. 


# Реализация:

В программе реализованны три модуля:

1. Создание пустой базы данных, содержащей таблицы fuel и trans.
2. Загрузка данных из файлов csv в таблицы базы данных. Дублирование
данных разрешено.
3. Формирование отчета по использования топлива.

## Создание базы данных:

Для создания базы данных необходимо запустить программу:

    python main.py --recreate

## Загрузка данных

Для загрузку данных из файлов необходимо:

1. Создать каталог data в рабочем каталоге программы.

2. Представить данные для загрузки в файлы fuel.csv и trans.csv в каталог data

3. Файл fuel.csv имеет следующую структуру(Название заправки, цена)

4. Файл trans.csv имеет следующую структуру(дата:YY/MM/DD,расстояние пройденное автомобилем:int,название заправки:str,количество галлонов:int)

5. Запустить программу:

    python3 main.py --load

## Формирование отчета

Отчет формируется в виде pdf-файла.

Для формирования отчета нужно запустить программу со следующими мараметрами:
    python3 main.py --report -s start_data -e end_data -f filename -n gas_name

# Данные получаемые в отчете:

Отчет формируется по данным, даты которых входят в диапазон дат, указаных при запуске программы.

## Данные таблицы:

- Дата заправки.
- Название заправки.
- Расстояние пройденное до этой заправки(мили).
- Цена одного галлона(центы).
- Расстояние, пройденное после предыдущей заправки(мили).
- Количество галлонов.
- Общая стоимость заправки(доллары).
- Расстояние пройденно на одном галлоне(мили).
- Цена одной мили(доллары).
- Цена одного дня(доллары).

## Данные короткой статистики:

### Таблица

- Общее пройденное расстояние(мили).
- Среднее расстояние между заправками(мили).
- Средняя цена галлона(центы).
- Среднее количество галлонов.
- Средняя цена одной заправки(доллары).
- Общая цена всех заправок(доллары).
- Средний пробег на одном галлоне(мили).
- Средняя цена одной мили(доллары).
- Средний расход топлива(галлоны).

- Самая часто посещаемая вами заправка.
- Самая выгодная заправка и информация о ней.
- Количество долларов, которые можно было сэкономить, если заправляться только на самой выгодной заправке.